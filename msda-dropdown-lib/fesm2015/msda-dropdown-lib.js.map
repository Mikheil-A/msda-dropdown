{"version":3,"file":"msda-dropdown-lib.js","sources":["ng://msda-dropdown-lib/lib/msda-dropdown-lib.service.ts","ng://msda-dropdown-lib/lib/msda-dropdown-lib.component.ts","ng://msda-dropdown-lib/lib/msda-dropdown-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MsdaDropdownLibService {\n\n  constructor() { }\n}\n","import {AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, QueryList, ViewChild, ViewChildren} from '@angular/core';\n\n\n@Component({\n  selector: 'lib-msda-dropdown-lib',\n  templateUrl: './msda-dropdown-lib.component.html',\n  styleUrls: ['./msda-dropdown-lib.component.scss']\n})\nexport class MsdaDropdownLibComponent implements OnInit, AfterViewInit, OnChanges  {\n\n\n  @ViewChildren('navItemRef') navItemRefs: QueryList<any>;\n  @ViewChildren('sectionElRef') sectionElRefs: QueryList<any>;\n\n  @ViewChild('popoverElRef', {static: true}) popoverElRef: ElementRef;\n  @ViewChild('headerElRef', {static: true}) headerElRef: ElementRef;\n  @ViewChild('arrowElRef', {static: true}) arrowElRef: ElementRef;\n  @ViewChild('contentElRef', {static: true}) contentElRef: ElementRef;\n  @ViewChild('backgroundElRef', {static: true}) backgroundElRef: ElementRef;\n\n  popoverLeft;\n\n\n  // TODO: generate on the fly\n  dimensions = [\n    {width: 490, height: 280, x: 0},\n    {width: 390, height: 266, x: 100},\n    {width: 260, height: 296, x: 200}\n  ];\n\n\n  @Input() public navigationData;\n\n\n  showSection(index) {\n    this.popoverElRef.nativeElement.classList.add('open');\n    this.sectionElRefs.forEach(el => el.nativeElement.classList.remove('active'));\n\n    this.sectionElRefs.forEach((el, i) => {\n\n      // this.dimensions[i]['height'] = el.nativeElement.offsetHeight;\n      // this.dimensions[i]['width'] = el.nativeElement.offsetWidth;\n      // this.dimensions[index]['x'] = el.nativeElement.getBoundingClientRect().x;\n\n      if (index === i) {\n        el.nativeElement.classList.add('active');\n\n        // el.nativeElement.addEventListener('mouseleave', () => {\n        //   this.popoverElRef.nativeElement.classList.remove('open');\n        // });\n      }\n    });\n\n\n    // Position arrow\n    this.arrowElRef.nativeElement['style'].transform = `translateX(${this.dimensions[index]['arrowX']}px)rotate(45deg)`;\n\n    // Resize and position background\n    this.backgroundElRef.nativeElement['style'].transform = `\n      translateX(${this.dimensions[index].x}px)\n      scaleX(${this.dimensions[index].width / this.dimensions[0].width})\n      scaleY(${this.dimensions[index].height / this.dimensions[0].height})\n    `;\n\n    this.backgroundElRef.nativeElement.style.height = this.dimensions[index].height + 'px';\n    // this.backgroundElRef.nativeElement.style.width = this.dimensions[index].width + 'px';\n\n    // Resize and position content\n    this.contentElRef.nativeElement.style.width = this.dimensions[index].width + 'px';\n    this.contentElRef.nativeElement.style.height = this.dimensions[index].height + 'px';\n    this.contentElRef.nativeElement.style.transform = `translateX(${this.dimensions[index].x}px)`;\n  }\n\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges() {\n    this.navigationData.forEach((navItem, i) => {\n      let numberOfProducts = 0;\n      navItem.dropdownData.forEach(dropdownItem => {\n        numberOfProducts += dropdownItem.products.length;\n      });\n\n      console.log(i, numberOfProducts);\n      this.dimensions[i]['height'] = numberOfProducts * 50 + 250;\n    });\n  }\n\n  ngAfterViewInit() {\n    this.popoverLeft = this.popoverElRef.nativeElement.getBoundingClientRect().x;\n\n    this.navItemRefs.forEach((navItem, i) => {\n      const rect = navItem.nativeElement.getBoundingClientRect();\n      this.dimensions[i]['arrowX'] = rect.left + (rect.width / 2) - this.popoverLeft;\n    });\n\n    // Set initial arrow position\n    this.arrowElRef.nativeElement['style'].transform = `translateX(${this.dimensions[0]['arrowX']}px)rotate(45deg)`;\n\n    this.headerElRef.nativeElement.addEventListener('mouseleave', () => {\n      this.popoverElRef.nativeElement.classList.remove('open');\n    });\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {MsdaDropdownLibComponent} from './msda-dropdown-lib.component';\nimport {HttpClientModule} from '@angular/common/http';\nimport {CommonModule} from '@angular/common';\n\n\n@NgModule({\n  declarations: [MsdaDropdownLibComponent],\n  imports: [\n    HttpClientModule,\n    CommonModule\n  ],\n  exports: [MsdaDropdownLibComponent]\n})\nexport class MsdaDropdownLibModule {\n}\n"],"names":[],"mappings":"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"}