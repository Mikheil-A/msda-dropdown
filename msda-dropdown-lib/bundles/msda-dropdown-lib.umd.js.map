{"version":3,"file":"msda-dropdown-lib.umd.js","sources":["ng://msda-dropdown-lib/lib/msda-dropdown-lib.service.ts","ng://msda-dropdown-lib/lib/msda-dropdown-lib.component.ts","ng://msda-dropdown-lib/lib/msda-dropdown-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MsdaDropdownLibService {\n\n  constructor() { }\n}\n","import {AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, QueryList, ViewChild, ViewChildren} from '@angular/core';\n\n\n@Component({\n  selector: 'lib-msda-dropdown-lib',\n  templateUrl: './msda-dropdown-lib.component.html',\n  styleUrls: ['./msda-dropdown-lib.component.scss']\n})\nexport class MsdaDropdownLibComponent implements OnInit, AfterViewInit, OnChanges  {\n\n\n  @ViewChildren('navItemRef') navItemRefs: QueryList<any>;\n  @ViewChildren('sectionElRef') sectionElRefs: QueryList<any>;\n\n  @ViewChild('popoverElRef', {static: true}) popoverElRef: ElementRef;\n  @ViewChild('headerElRef', {static: true}) headerElRef: ElementRef;\n  @ViewChild('arrowElRef', {static: true}) arrowElRef: ElementRef;\n  @ViewChild('contentElRef', {static: true}) contentElRef: ElementRef;\n  @ViewChild('backgroundElRef', {static: true}) backgroundElRef: ElementRef;\n\n  popoverLeft;\n\n\n  // TODO: generate on the fly\n  dimensions = [\n    {width: 490, height: 280, x: 0},\n    {width: 390, height: 266, x: 100},\n    {width: 260, height: 296, x: 200}\n  ];\n\n\n  @Input() public navigationData;\n\n\n  showSection(index) {\n    this.popoverElRef.nativeElement.classList.add('open');\n    this.sectionElRefs.forEach(el => el.nativeElement.classList.remove('active'));\n\n    this.sectionElRefs.forEach((el, i) => {\n\n      // this.dimensions[i]['height'] = el.nativeElement.offsetHeight;\n      // this.dimensions[i]['width'] = el.nativeElement.offsetWidth;\n      // this.dimensions[index]['x'] = el.nativeElement.getBoundingClientRect().x;\n\n      if (index === i) {\n        el.nativeElement.classList.add('active');\n\n        // el.nativeElement.addEventListener('mouseleave', () => {\n        //   this.popoverElRef.nativeElement.classList.remove('open');\n        // });\n      }\n    });\n\n\n    // Position arrow\n    this.arrowElRef.nativeElement['style'].transform = `translateX(${this.dimensions[index]['arrowX']}px)rotate(45deg)`;\n\n    // Resize and position background\n    this.backgroundElRef.nativeElement['style'].transform = `\n      translateX(${this.dimensions[index].x}px)\n      scaleX(${this.dimensions[index].width / this.dimensions[0].width})\n      scaleY(${this.dimensions[index].height / this.dimensions[0].height})\n    `;\n\n    this.backgroundElRef.nativeElement.style.height = this.dimensions[index].height + 'px';\n    // this.backgroundElRef.nativeElement.style.width = this.dimensions[index].width + 'px';\n\n    // Resize and position content\n    this.contentElRef.nativeElement.style.width = this.dimensions[index].width + 'px';\n    this.contentElRef.nativeElement.style.height = this.dimensions[index].height + 'px';\n    this.contentElRef.nativeElement.style.transform = `translateX(${this.dimensions[index].x}px)`;\n  }\n\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges() {\n    this.navigationData.forEach((navItem, i) => {\n      let numberOfProducts = 0;\n      navItem.dropdownData.forEach(dropdownItem => {\n        numberOfProducts += dropdownItem.products.length;\n      });\n\n      console.log(i, numberOfProducts);\n      this.dimensions[i]['height'] = numberOfProducts * 50 + 250;\n    });\n  }\n\n  ngAfterViewInit() {\n    this.popoverLeft = this.popoverElRef.nativeElement.getBoundingClientRect().x;\n\n    this.navItemRefs.forEach((navItem, i) => {\n      const rect = navItem.nativeElement.getBoundingClientRect();\n      this.dimensions[i]['arrowX'] = rect.left + (rect.width / 2) - this.popoverLeft;\n    });\n\n    // Set initial arrow position\n    this.arrowElRef.nativeElement['style'].transform = `translateX(${this.dimensions[0]['arrowX']}px)rotate(45deg)`;\n\n    this.headerElRef.nativeElement.addEventListener('mouseleave', () => {\n      this.popoverElRef.nativeElement.classList.remove('open');\n    });\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {MsdaDropdownLibComponent} from './msda-dropdown-lib.component';\nimport {HttpClientModule} from '@angular/common/http';\nimport {CommonModule} from '@angular/common';\n\n\n@NgModule({\n  declarations: [MsdaDropdownLibComponent],\n  imports: [\n    HttpClientModule,\n    CommonModule\n  ],\n  exports: [MsdaDropdownLibComponent]\n})\nexport class MsdaDropdownLibModule {\n}\n"],"names":["Injectable","Component","ViewChildren","ViewChild","Input","NgModule","HttpClientModule","CommonModule"],"mappings":"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"}